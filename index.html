<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="fontawesome-free-6.4.2-web/css/all.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous" />
  <link rel="stylesheet" href="style.css">
  <title>Welcome to my Firebase Hosting</title>
</head>

<body>
  <div class="container text-center mt-5">
    <div class="col-lg-6 col-12 shadow mx-auto p-lg-4 p-3" style="border-radius: 15px;  backdrop-filter: blur(25px);">
      <div class="mb-4">
        <h1>Sign up</h1>
        <p>
          Get started with our app,<br />
          Just create an account and enjoy the experience.
        </p>
      </div>

      <div class="px-lg-5 px-0">
        <input type="text" placeholder="First name" class="col-6 form-control mb-4 border border-dark py-2" id="userFn" />
        <input type="text" placeholder="Last name" class="py-2 col-6 form-control mb-4 border border-dark" id="userLn" />
        <input type="email" placeholder="Email" class="py-2 col-6 form-control mb-4 border border-dark" id="em" />
        <input type="password" placeholder="Password" class="py-2 col-6 form-control border border-dark" name="" id="" />
      </div>
      <div class="mt-3 px-lg-5">
        <input type="button" value="Sign Up" id="btn" class="btn btn-dark w-50 shadow" />
      </div>
      <hr>
      <div class="">
        <p class="">Sign up with</p>
        <div class="">
          <button class="btn">
            <i class="fa-brands fa-facebook fa-xl mx-2"></i>
          </button>
          <button class="btn">
            <i class="fa-brands fa-instagram fa-xl mx-2" style="color: #96172a"></i>
          </button>
          <button class="btn">
            <i class="fa-brands fa-twitter fa-xl mx-2"></i>
          </button>
          <button class="btn" onclick="signUpG()">
            <i class="fa-brands fa-google fa-xl mx-3" style="color: #ae1313"></i>
          </button>
        </div>
      </div>
      <div id="display"></div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-analytics.js";
    import {
      GoogleAuthProvider,
      getAuth,
      signInWithPopup, sendEmailVerification
    } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";
    import {
      getDatabase,
      ref,
      set,
    } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAPtPNwR_B8FbP_Yt1nR4LjFcFqd0y6PjI",
      authDomain: "auth-test2-ebd9b.firebaseapp.com",
      projectId: "auth-test2-ebd9b",
      storageBucket: "auth-test2-ebd9b.appspot.com",
      messagingSenderId: "555045725133",
      appId: "1:555045725133:web:23f363b77f0862aa5a5a84",
      measurementId: "G-GNRF2FX4Y3",
      databaseURL: "https://auth-test2-ebd9b-default-rtdb.firebaseio.com",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const provider = new GoogleAuthProvider();
    const auth = getAuth();
    const database = getDatabase(app);

    const signUpG = () => {
      signInWithPopup(auth, provider)
        .then((result) => {
          console.log(result);
          let userInfo = result.user;
          console.log(userInfo);

          sendEmailVerification(auth.currentUser)
          .then((res)=>{
            console.log(res);
          })
          .catch((err)=>{
            console.log(err);
          })
          result ? window.location.href = 'dash.html' : window.location.href = 'index.html'
        })
        .catch((err) => {
          console.log(err);
        });
        //window.location.href = 'dash.html'
    };
    window.signUpG = signUpG;
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
</body>

</html>